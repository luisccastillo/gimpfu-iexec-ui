<!DOCTYPE html>
<html>
   <head>
      <title>iExec</title>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
   <link rel="stylesheet" href="/gimpfu-iexec-ui/gimpfu-iexec-ui.2a2b7c0d.css"></head>
   <body>
      <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
         <symbol id="bootstrap" viewBox="0 0 118 94">
            <title>Bootstrap</title>
            <path fill-rule="evenodd" clip-rule="evenodd" d="M24.509 0c-6.733 0-11.715 5.893-11.492 12.284.214 6.14-.064 14.092-2.066 20.577C8.943 39.365 5.547 43.485 0 44.014v5.972c5.547.529 8.943 4.649 10.951 11.153 2.002 6.485 2.28 14.437 2.066 20.577C12.794 88.106 17.776 94 24.51 94H93.5c6.733 0 11.714-5.893 11.491-12.284-.214-6.14.064-14.092 2.066-20.577 2.009-6.504 5.396-10.624 10.943-11.153v-5.972c-5.547-.529-8.934-4.649-10.943-11.153-2.002-6.484-2.28-14.437-2.066-20.577C105.214 5.894 100.233 0 93.5 0H24.508zM80 57.863C80 66.663 73.436 72 62.543 72H44a2 2 0 01-2-2V24a2 2 0 012-2h18.437c9.083 0 15.044 4.92 15.044 12.474 0 5.302-4.01 10.049-9.119 10.88v.277C75.317 46.394 80 51.21 80 57.863zM60.521 28.34H49.948v14.934h8.905c6.884 0 10.68-2.772 10.68-7.727 0-4.643-3.264-7.207-9.012-7.207zM49.948 49.2v16.458H60.91c7.167 0 10.964-2.876 10.964-8.281 0-5.406-3.903-8.178-11.425-8.178H49.948z"></path>
         </symbol>
         <symbol id="home" viewBox="0 0 16 16">
            <path d="M8.354 1.146a.5.5 0 0 0-.708 0l-6 6A.5.5 0 0 0 1.5 7.5v7a.5.5 0 0 0 .5.5h4.5a.5.5 0 0 0 .5-.5v-4h2v4a.5.5 0 0 0 .5.5H14a.5.5 0 0 0 .5-.5v-7a.5.5 0 0 0-.146-.354L13 5.793V2.5a.5.5 0 0 0-.5-.5h-1a.5.5 0 0 0-.5.5v1.293L8.354 1.146zM2.5 14V7.707l5.5-5.5 5.5 5.5V14H10v-4a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5v4H2.5z"></path>
         </symbol>
         <symbol id="speedometer2" viewBox="0 0 16 16">
            <path d="M8 4a.5.5 0 0 1 .5.5V6a.5.5 0 0 1-1 0V4.5A.5.5 0 0 1 8 4zM3.732 5.732a.5.5 0 0 1 .707 0l.915.914a.5.5 0 1 1-.708.708l-.914-.915a.5.5 0 0 1 0-.707zM2 10a.5.5 0 0 1 .5-.5h1.586a.5.5 0 0 1 0 1H2.5A.5.5 0 0 1 2 10zm9.5 0a.5.5 0 0 1 .5-.5h1.5a.5.5 0 0 1 0 1H12a.5.5 0 0 1-.5-.5zm.754-4.246a.389.389 0 0 0-.527-.02L7.547 9.31a.91.91 0 1 0 1.302 1.258l3.434-4.297a.389.389 0 0 0-.029-.518z"></path>
            <path fill-rule="evenodd" d="M0 10a8 8 0 1 1 15.547 2.661c-.442 1.253-1.845 1.602-2.932 1.25C11.309 13.488 9.475 13 8 13c-1.474 0-3.31.488-4.615.911-1.087.352-2.49.003-2.932-1.25A7.988 7.988 0 0 1 0 10zm8-7a7 7 0 0 0-6.603 9.329c.203.575.923.876 1.68.63C4.397 12.533 6.358 12 8 12s3.604.532 4.923.96c.757.245 1.477-.056 1.68-.631A7 7 0 0 0 8 3z"></path>
         </symbol>
         <symbol id="table" viewBox="0 0 16 16">
            <path d="M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2zm15 2h-4v3h4V4zm0 4h-4v3h4V8zm0 4h-4v3h3a1 1 0 0 0 1-1v-2zm-5 3v-3H6v3h4zm-5 0v-3H1v2a1 1 0 0 0 1 1h3zm-4-4h4V8H1v3zm0-4h4V4H1v3zm5-3v3h4V4H6zm4 4H6v3h4V8z"></path>
         </symbol>
         <symbol id="people-circle" viewBox="0 0 16 16">
            <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"></path>
            <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"></path>
         </symbol>
         <symbol id="grid" viewBox="0 0 16 16">
            <path d="M1 2.5A1.5 1.5 0 0 1 2.5 1h3A1.5 1.5 0 0 1 7 2.5v3A1.5 1.5 0 0 1 5.5 7h-3A1.5 1.5 0 0 1 1 5.5v-3zM2.5 2a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zm6.5.5A1.5 1.5 0 0 1 10.5 1h3A1.5 1.5 0 0 1 15 2.5v3A1.5 1.5 0 0 1 13.5 7h-3A1.5 1.5 0 0 1 9 5.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zM1 10.5A1.5 1.5 0 0 1 2.5 9h3A1.5 1.5 0 0 1 7 10.5v3A1.5 1.5 0 0 1 5.5 15h-3A1.5 1.5 0 0 1 1 13.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3zm6.5.5A1.5 1.5 0 0 1 10.5 9h3a1.5 1.5 0 0 1 1.5 1.5v3a1.5 1.5 0 0 1-1.5 1.5h-3A1.5 1.5 0 0 1 9 13.5v-3zm1.5-.5a.5.5 0 0 0-.5.5v3a.5.5 0 0 0 .5.5h3a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-.5-.5h-3z"></path>
         </symbol>
      </svg>
      <main>
      <header class="p-3 bg-dark text-white">
         <div class="container">
            <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
               <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
                  <li><a href="https://github.com/luisccastillo/gimpfu-iexec" class="nav-link px-2 text-white"><b>&#128058; gimpfu-iexec</b></a></li>
               </ul>
               <div class="text-end">
                  <div class="dropdown dropend">
                     <button class="btn btn-secondary btn-sm btn-warning dropdown-toggle" type="button" id="dropdownMenuButton2" data-bs-toggle="dropdown" aria-expanded="false">
                     <span id="address">Please connect with Metamask</span>
                     </button>
                     <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="dropdownMenuButton2">
                        <li><a class="dropdown-item btn-sm disabled" href="#"><span id="native-wallet"></span></a></li>
                        <li><a class="dropdown-item btn-sm disabled" href="#"><span id="account"></span></a></li>
                     </ul>
                  </div>
                  <span class="badge bg-secondary bg-warning text-dark" "="" id="network"></span>
               </div>
            </div>
         </div>
      </header>
      <div class="container col-xxl-8 px-4 py-5">
         <div class="row flex-lg-row-reverse align-items-center g-5 py-5">
            <div class="col-10 col-sm-8 col-lg-6">
               <img src="https://user-images.githubusercontent.com/6378201/119253410-6e5b1300-bbb1-11eb-8819-2c2a2e51807a.png" class="d-block mx-lg-auto img-fluid" alt="Bootstrap Themes" width="700" height="500" loading="lazy">
            </div>
            <div class="col-lg-6">
               <h1 class="display-7 fw-bold lh-1 mb-3">Decentralized off-chain computing</h1>
               <p class="lead">
                  Smart contracts are secure and reliable programs, but they are also costly and limited when executing more complex transactions. iExec provides decentralized applications (Dapps) to complement Blockchain technology with off-chain computing.
               </p><p class="lead">
                  This website is a live demonstration of the workflow of an iExec Dapp. it does not explore all of the capabilities of the iExec platform. The showcased application is an image filter processed with
                  <a href="https://www.gimp.org/tutorials/Basic_Batch/">GIMP</a>.
               </p>
            </div>
         </div>
      </div>
      <div class="b-example-divider"></div>
      <div class="container col-xxl-8 px-4 py-5">
         <h2 class="display-7 lh-1 mb-3">Prerequisite A : wallet & network set-up</h2>
         <hr>
         <p class="lead">
            In order to interact with blockchain applications in a website, you  must possess a web wallet (and an account). For simplicity purposes <a href="https://metamask.io/">Metamask</a> works only in this demo, but other solutions work as good for managing your Ethereum identity.
         </p>
         <p class="lead">
            Once you have created an account, you may switch between different <a href="https://ethereum.org/en/developers/docs/networks/">Ethereum networks</a>, it is important to note that records only exist within the same network, therefore
            make sure your balances, orders, dapps and other assets are available in the selected network. In this example only the Goerli Testnet and the Bellecour iExec Sidechain are available.
         </p>
         <p class="lead">
            On the top right corner of this page, you can consult your available token balances in the selected network. ETH is used to interact with the Ethereum Blockchain, whereas RLC is used to interact with the iExec platform.
         </p>
         <p class="lead">
            For testing purposes, iExec offers a <a href="https://faucet.iex.ec/goerli">faucet</a> which provides 200 nRLC for free.
            Ethereum Goerli faucets are also available over the internet. Note that nRLC is a scaling unit of RLC : 1 nRLC equals to 0.000000001 RLC.
         </p>
      </div>
      <div class="b-example-divider"></div>
      <div class="container col-xxl-8 px-4 py-5">
         <h2 class="display-7 lh-1 mb-3">Prerequisite B : storage set-up</h2>
         <hr>
         <p class="lead">The application needs a place to store the execution's output, for that we use decentralized storage solution called <a href="https://ipfs.io/">IPFS</a>.
            Click on the button below to initialize your remote storage :
         </p>
         <div class="container">
            <label id="storage-check-error" class="error"></label>
         </div>
         <div class="container">
            <button id="storage-init-button" class="btn btn-warning" disabled=""><span id="storage-check-output"></span></button>
            <label id="storage-init-error" class="error"></label>
         </div>
         <br>
         <p class="lead">By default, the result is publicly published, but you may also configure your results to be encrypted and available only for your account (or someone else's). Uploading results to
            private storage solutions is also supported.
         </p>
      </div>
      
      <div class="b-example-divider"></div>
      <div class="container col-xxl-8 px-4 py-5">
         <h2 class="display-7 lh-1 mb-3">Step 0 : Application & sell order check</h2>
         <hr>
         <p class="lead">Applications are built using <a href="https://ipfs.io/">Docker</a> containers and stored in  <a href="https://registry.hub.docker.com/layers/luiscarlosiexec/gimpfu-cartoon/1.0.0/images/sha256-bee53e1dac55d90350072128a6474fcec0c002bd0f163948e7b644dea8e8adb7?context=explore">Dockerhub</a>.
            Once an application has been deployed through iExec, it cannot be deleted, however, the corresponding docker image may be deleted. Thanks to the checksum value we can make sure the application hasn't been modified even if it is deleted and re-added with the same name/version.
         </p>
         <div class="container">
            <div>
               <label for="apps-address-input">App address</label>
               <input id="apps-address-input" type="text" value="0x3bFAE162b997D68A98545aa8B75a0Bcc252f1fed" placeholder="App address">
               <button id="apps-show-button" class="btn btn-warning" disabled="">Show application</button>
            </div>
            <label id="apps-show-error" class="error"></label>
            <pre class="pre-scrollable">
          <code id="apps-details-output" style="display:inline-block;">
          </code>
        </pre>
         </div>
         <p class="lead">
            Application orders are created by the application owner, they are a representation of the volume, the price, and the restrictions of an execution. If no application orders have been created by its owner, it is not possible to buy an execution. In this example, two application orders with different volume have been created, one costing 0 nRLC and a second one costing 1 nRLC.
         </p>
         <div class="container">
            <div>
               <label for="app-orderbook-address-input">App address</label>
               <input id="app-orderbook-address-input" type="text" value="0x3bFAE162b997D68A98545aa8B75a0Bcc252f1fed" placeholder="App address">
               <button id="app-orderbook-show-button" class="btn btn-warning" disabled="">Show orders</button>
            </div>
            <label id="app-orderbook-show-error" class="error"></label>
            <pre class="pre-scrollable">
          <code id="app-orderbook-details-output" style="display:inline-block;">
          </code>
        </pre>
         </div>
      </div>
      <div class="b-example-divider"></div>
      <div class="container col-xxl-8 px-4 py-5">
         <h2 class="display-7 lh-1 mb-3">Step 1 : Computation order buy</h2>
         <hr>
         <p class="lead">The complete user interface of this dapp could be done on this section, as the user needs only to provide the URL of the image to be processed. By clicking on buy computation, a signature request will be asked to verify the integrity of the paratameters of the request. Then, a transaction
            approval will be prompted in order to launch a smart contract call that will manage the execution of the application.
         </p>
         <p></p>
         <p class="lead">The used parameters in this applications are: the app address, the type of execution (0 being standard), the image url, and the place where it will be executed.
            There are several other parameters that can be adjusted depending on the use case, for this example, a specific workerpool is requested so that the execution is done on a compatible iExec version. If not specified, an alpha version workerpool may pick the execution and it may not run as intended.
         </p>
         <div class="form-group form-inline">
            <label for="buy-appaddress-input">App address</label>
            <input class="form-control" id="buy-appaddress-input" type="text" value="0x3bFAE162b997D68A98545aa8B75a0Bcc252f1fed" placeholder="App address">
            <label for="buy-category-input">Category</label>
            <input class="form-control" id="buy-category-input" type="number" value="0" min="0" placeholder="Category">
            <label for="buy-params-input">App params</label>
            <input class="form-control" id="buy-params-input" type="text" value="{&quot;iexec_input_files&quot;:[&quot;URL of .png or .jpg image&quot;]}" placeholder="App args">
            <div>
               <label for="workerpool-input">Workerpool</label>
               <input class="form-control" id="workerpool-input" type="text" value="0xEb6c3FA8522f2C342E94941C21d3947c099e6Da0" placeholder="input files">
               <br>
               <button id="buy-buy-button" class="btn btn-warning" disabled="">Buy computation</button>
               <br>
               <label id="buy-buy-error" class="error"></label>
               <pre class="pre-scrollable">
            <code id="buy-dealid-output" style="display:inline-block;">
            </code>
            </pre>
               <p class="lead">
                  Please check the available <a href="https://pools.iex.ec/">workerpools</a> that are suited for your application in terms of hardware requirements, running network, or version.
                  Please note that an application owner may whitelist the usage of a specific workerpool for its execution.
               </p>
               <p></p>
               <p class="lead">
                  Once you buy the computation, please wait for a response before continuing with this tutorial. Transaction times may differ depending on network congestion or availability.
               </p>
               <p></p>
            </div>
         </div>
      </div>
      <div class="b-example-divider"></div>
      <div class="container col-xxl-8 px-4 py-5">
         <h2 class="display-7 lh-1 mb-3">Step 2 : Deal assignation</h2>
         <hr>
         <p class="lead">In this example, the computation is bought at market price. iExec provides a <a href="https://market.iex.ec/">marketplace</a> where computations can be traded based on more advanced parameters. When deployed, application executions are not publicly tradable by default in the marketplace.</p>
         <p></p>
         <p class="lead">The iExec marketplace trades deals, which are a representation of the characteristics of a dapp (size, type, trust level), the cost of an order, and the cost of its execution. Since this deal requests a particular workerpool to be used, the execution price is defined by the workerpool. Otherwise,
            workerpools may choose to execute (or not) the deals that earn the most RLC for them.
         </p>
         <p></p>
         <div class="container">
            <div>
               <label for="results-dealid-input">Dealid</label>
               <input id="results-dealid-input" type="text" value="The dealId from step 1" placeholder="dealid">
               <button id="results-showdeal-button" class="btn btn-warning" disabled="">Show deal</button>
            </div>
            <label id="results-showdeal-error" class="error"></label>
            <pre class="pre-scrollable">
          <code id="results-dealdetails-output" style="display:inline-block;">
          </code>
        </pre>
         </div>
      </div>
      <div class="b-example-divider"></div>
      <div class="container col-xxl-8 px-4 py-5">
         <h2 class="display-7 lh-1 mb-3">Step 3 : Execution </h2>
         <hr>
         <p class="lead">
            When a deal has been assigned to a workerpool, it schedules the tasks of the dapp based on the availability and characteristics of the workers in the pool.
            One task results in one to many replicates depending on the level of trust set by the buy order. For a given task, each worker involved has its own replicate containing the description of the task to compute inside.
         </p>
         <p></p>
         <p class="lead">
            In this example, only one worker executes the task (trust is set to 01). The worker goes through different <a href="https://docs.iex.ec/for-workers/quick-worker-start">replicate status</a> and provides a computed.json file which acts as a proof of contribution.
            This file is needed to reach consensus when multiple workers execute the same task.
         </p>
         <p class="lead">
            The status of a task, as well as other elements in the platform, can be consuled in the <a href="https://docs.iex.ec/for-workers/quick-worker-start">iExec explorer</a>.
         </p>
         <div class="container">
            <div>
               <label for="results-taskid-input">Taskid</label>
               <input id="results-taskid-input" type="text" value="The taskId from step 2" placeholder="taskid">
               <button id="results-showtask-button" class="btn btn-warning" disabled="">Show task</button>
            </div>
            <label id="results-showtask-error" class="error"></label>
            <pre class="pre-scrollable">
          <code id="results-taskdetails-output" style="display:inline-block;">
          </code>
        </pre>
         </div>
      </div>
      
      <div class="b-example-divider"></div>
      <div class="container col-xxl-8 px-4 py-5">
         <h2 class="display-7 lh-1 mb-3">Step 4 : Result fetching </h2>
         <hr>
         <p class="lead">After the task is marked as COMPLETED, the results can be fetched from IPFS. Download times depend on the network finding the node that stores the results.</p>
         <p></p>
         <div class="container">
            <div>
               <label for="results-download-input">Taskid</label>
               <input id="results-download-input" type="text" value="the COMPLETED taskId from step 2" placeholder="taskid to download">
               <button id="results-download-button" class="btn btn-warning" disabled="">
               Download task result
               </button>
            </div>
         </div>
         <label id="results-download-error" class="error"></label>
      </div>
      
      
      <div class="b-example-divider"></div>
      <footer class="footer mt-auto py-3 bg-dark text-white">
         <div class="container">
            <span class="text-muted"></span>
         </div>
      </footer>
      <script src="/gimpfu-iexec-ui/gimpfu-iexec-ui.6e05cef9.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
   </main></body>
</html>
